<html>
  <head>
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/reveal.js/3.0.0/css/reveal.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/reveal.js/3.0.0/css/theme/white.css">
		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/reveal.js/3.0.0/lib/css/zenburn.css">
	</head>
	<body>
		<div class="reveal">
          <div class="slides">
          </section>
           <!-- separator -->
            <section>
               <p>
               </p>
               <h2>Tidyverse and plotting with ggplot</h2>
               <p>
               </p>
              </section>
           <!-- separator -->
            <section>
               <h2>Topics</h2>
               <p>
               </p>
               <ol>
               <li>Factors</li>
               <li>dplyr package</li>
               <li>ggplot package</li>
               </ol>
              </section>
           <!-- separator -->
            <section>
               <h2>1. Factors..</h2>
               <p>
               </p>
               <ul>
               <li>..represent categorical data</li>
               <li>..are an important class for statistical analysis and plotting</li>
               <li>..are stored integers with an associated label</li>
               </ul>
              </section>
           <!-- separator -->
            <section>
               <h2><i>Challenge</i></h2>
               <p>
               </p>
               You have a vector representing levels of exercise undertaken by 5 subjects<br>
               <i>'l','n','n','i','l' ; n=none, l=light, i=intense</i>
               <p></p>
               What is the best way to represent this in R?<p></p>
<pre><code class="R">
1) exercise <- c('l', 'n', 'n', 'i', 'l')</li>
2) exercise <- factor(c('l', 'n', 'n', 'i', 'l'), ordered = TRUE)</li>
3) exercise < -factor(c('l', 'n', 'n', 'i', 'l'), levels = c('n', 'l', 'i'), ordered = FALSE)</li>
4) exercise <- factor(c('l', 'n', 'n', 'i', 'l'), levels = c('n', 'l', 'i'), ordered = TRUE)</li>
</code></pre>
              </section>
           <!-- separator -->
            <section>
               <h2>Summing up factors</h2>
               <p>
               </p>
               <ul>
               <li>order or unordered?</li>
               <li>order of levels important for plotting</li>
               <li>attention when converting !!</li>
               <li>as.character() (results in character)</li>
               <li>as.numeric( as.character() ) (results in numeric)</li>
               </ul>
              </section>
           <!-- separator -->
            <section>
               <h2>2. dplyr grammar</h2>
               <img src="dplyr_grammar.png" alt="dplyr grammar" height="580" width="1800" border="0"> 
              </section>
           <!-- separator -->
            <section>
              <h2><i>Challenge 1</i></h2>
              Write a single command (which can span multiple lines and includes pipes)
              that will produce a dataframe that has the African values for <i>lifeExp</i>, <i>country</i> and <i>year</i>,
              but not for other Continents.
               <p>
               </p>
              How many rows does your dataframe have and why?
              </section>
           <!-- separator -->
            <section>
              <h2><i>Challenge 2</i></h2>
              Calculate the average life expectancy per country.
               <p>
               </p>
              Which has the longest average life expectancy and which has the shortest average life expectancy?
              </section>
           <!-- separator -->
            <section>
               <h2>3. ggplot</h2>
               <p>
               </p>
               <ul>
               <li>Figure constructed of different layers</li>
               <li>data, coordinate sytem, geoms</li>
               <li>Possible to include transformations and statistics</li>
               </ul>
              </section>
           <!-- separator -->
            <section>
              <h2><i>Challenge 3</i></h2>
Modify the example so that the figure shows how life expectancy has changed over time:
               <p>
               </p>
<pre><code class="R">
ggplot(data = gapminder, aes(x = gdpPercap, y = lifeExp)) + geom_point()
</code></pre>
Hint: the gapminder dataset has a column called “year”, which should appear on the x-axis.
              </section>
           <!-- separator -->
            <section>
              <h2><i>Challenge 4</i></h2>
              In the previous examples and challenge we have used the <i>aes</i> function to tell the scatterplot geom about the x and y locations of each point.
              Another aesthetic property we can modify is the point color.
              Modify the code from the previous challenge to color the points by the <i>continent</i> column.
              <p></p>
              What trends do you see in the data? Are they what you expected?
              </section>
           <!-- separator -->
            <section>
              <h2><i>Challenge 5</i></h2>
              Switch the order of the point and line layers from the previous example. What happened?
              </section>
           <!-- separator -->
            <section>
              <h2><i>Challenge 6a</i></h2>
Modify the color and size of the points on the point layer in the previous example.
<p></p>
Hint: do not use the <i>aes</i> function.
              </section>
           <!-- separator -->
            <section>
              <h2><i>Challenge 6b</i></h2>
              Modify your solution to Challenge 6a so that the points are now a different shape and are colored by continent with new trendlines.
               <p>
               </p>
              Hint: The color argument can be used inside the aesthetic.
              </section>
           <!-- separator -->
            <section>
              <h2><i>Challenge 7</i></h2>
Create a density plot of GDP per capita, filled by continent.
               <p>
               </p>
Advanced:
<ul>
<li>Transform the x axis to better visualise the data spread.</li>
<li>Add a facet layer to panel the density plots by year.</li>
</ul>
              </section>
		</div>
		</div>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/headjs/1.0.3/head.min.js"></script>
		<script src="https://cdn.jsdelivr.net/reveal.js/3.0.0/js/reveal.js"></script>
        <script>
          Reveal.initialize( 
    {
    // Display controls in the bottom right corner
	controls: true,
	// Display a presentation progress bar
	progress: true,
	// Display the page number of the current slide
	slideNumber: true,
	// Push each slide change to the browser history
	history: false,
	// Enable keyboard shortcuts for navigation
	keyboard: true,
	// Enable the slide overview mode
	overview: true,
	// Vertical centering of slides
	center: true,
	// Turns fragments on and off globally
	fragments: true,
	// Flags if the presentation is running in an embedded mode,
	// i.e. contained within a limited portion of the screen
	embedded: false,
	// Flags if we should show a help overlay when the questionmark
	// key is pressed
	help: true,
	// Hides the address bar on mobile devices
	hideAddressBar: true,
	// Transition style
	transition: 'slide', // none/fade/slide/convex/concave/zoom
	// Transition speed
    transitionSpeed: 'default', // default/fast/slow
    dependencies: [
		// Cross-browser shim that fully implements classList - https://github.com/eligrey/classList.js/
		{ src: '//cdn.jsdelivr.net/reveal.js/3.0.0/lib/js/classList.js', condition: function() { return !document.body.classList; } },

		// Interpret Markdown in <section> elements
		{ src: '//cdn.jsdelivr.net/reveal.js/3.0.0/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
		{ src: '//cdn.jsdelivr.net/reveal.js/3.0.0/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },

		// // Syntax highlight for <code> elements
        { src: '//cdn.jsdelivr.net/reveal.js/3.0.0/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
        //
		// // Zoom in and out with Alt+click
		{ src: '//cdn.jsdelivr.net/reveal.js/3.0.0/plugin/zoom-js/zoom.js', async: true },
        //
		// // Speaker notes
		{ src: '//cdn.jsdelivr.net/reveal.js/3.0.0/plugin/notes/notes.js', async: true },
        //
		// // MathJax
		{ src: '//cdn.jsdelivr.net/reveal.js/3.0.0/plugin/math/math.js', async: true }
	]
    });
		</script>
	</body>
  </html>
